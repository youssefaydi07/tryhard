<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>ChronomÃ¨tre Pro â€” Ultra Focus</title>

    <style>
        /* ------------------------------
           ðŸŸª STYLE GLOBAL
        ------------------------------ */
        :root {
            --bg: #0d0d0d;
            --fg: #eaeaea;
            --panel: #111;
            --accent: #4a90e2;
            --radius: 14px;
            --menu-bg: #111;
            --menu-hover: #1c1c1c;
            --menu-active: #4a90e2;
        }

        body.light {
            --bg: #f4f4f4;
            --fg: #111;
            --panel: #ffffff;
            --menu-bg: #ffffff;
            --menu-hover: #ddd;
            --menu-active: #4a90e2;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--bg);
            color: var(--fg);
            font-family: "Inter", sans-serif;
            height: 100vh;
        }

        /* ------------------------------
           ðŸŸ¦ NAVBAR HORIZONTALE â€” OPTION C
        ------------------------------ */
        #navbar {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            margin-bottom: 25px;
        }

        .nav-item {
            padding: 10px 22px;
            background: var(--panel);
            border-radius: 999px;
            cursor: pointer;
            color: var(--fg);
            font-size: 16px;
            font-weight: 500;
            border: 1px solid #222;
            opacity: 0.85;
            transition: 0.25s ease;
        }

        .nav-item:hover {
            transform: scale(1.12);
            background: var(--menu-hover);
            opacity: 1;
        }

        .nav-item.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            transform: scale(1.08);
            opacity: 1;
        }

        /* ------------------------------
           ðŸŸ§ CONTAINER PREMIUM CENTRÃ‰
        ------------------------------ */
        #content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px;
            background: var(--panel);
            border-radius: 20px;
            box-shadow: 0 0 40px rgba(255,255,255,0.05);
        }

        /* ------------------------------
           ðŸŸª PAGES
        ------------------------------ */
        section.page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        section.page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ------------------------------
           ðŸŸª TITRES
        ------------------------------ */
        h1 {
            font-weight: 300;
            font-size: 28px;
            margin-bottom: 25px;
            text-align: center;
        }

        /* --------------------------------------------
           ðŸŸ© STYLE DU CHRONO
        -------------------------------------------- */
        #chronoDisplay {
            font-size: 70px;
            font-family: "JetBrains Mono", monospace;
            background: #000;
            padding: 30px 60px;
            border-radius: var(--radius);
            display: inline-block;
            margin-bottom: 30px;
            box-shadow: 0 0 40px rgba(255,255,255,0.07);
            transition: transform 0.08s, text-shadow 0.2s;
        }

        .glow {
            text-shadow: 0 0 22px rgba(255,255,255,0.25);
            transform: scale(1.03);
        }

        .time-controls input {
            width: 80px;
            padding: 10px;
            margin: 5px;
            background: #1c1c1c;
            border: 1px solid #333;
            color: var(--fg);
            border-radius: 8px;
            font-size: 15px;
            text-align: center;
        }

        button {
            padding: 12px 25px;
            margin: 8px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: 0.25s;
            color: white;
        }

        button:hover {
            transform: scale(1.1);
        }

        #btnStart { background: #2ecc71; }
        #btnStop  { background: #e74c3c; }
        #btnReset { background: #7f8c8d; }
        #btnAdd   { background: #3498db; }
        #btnRemove{ background: #d35400; }

        /* ------------------------------
           ðŸŸ§ MODE FOCUS
        ------------------------------ */
        #focusOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            color: white;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: "JetBrains Mono", monospace;
            z-index: 9999;
        }

        #focusTimer {
            font-size: 100px;
            margin-bottom: 20px;
        }

        #exitFocus { background: #e74c3c; }

        /* ------------------------------
           ðŸŸ¨ POMODORO
        ------------------------------ */
        #pomodoroDisplay {
            font-size: 50px;
            padding: 20px;
            text-align: center;
        }

        /* ------------------------------
           ðŸŸ« STATISTIQUES
        ------------------------------ */
        #statsTable {
            background: var(--panel);
            padding: 20px;
            border-radius: var(--radius);
            width: 100%;
            border-collapse: collapse;
        }

        /* ======================================================
           ðŸŒž FIX DU MODE CLAIR (Chrono + Stats + Inputs + Panel)
        ====================================================== */
        body.light #chronoDisplay {
            background: #ffffff !important;
            color: #111 !important;
            box-shadow: 0 0 20px rgba(0,0,0,0.1) !important;
        }

        body.light .time-controls input {
            background: #ffffff !important;
            border: 1px solid #bbb !important;
            color: #111 !important;
        }

        body.light #statsSummary {
            background: #ffffff !important;
            color: #111 !important;
        }

        body.light #statsTable {
            background: #ffffff !important;
        }

        body.light #statsTable th {
            background: #e0e0e0 !important;
            color: #111 !important;
        }

        body.light #statsTable td {
            background: #fafafa !important;
            color: #111 !important;
        }

        body.light #content {
            background: #ffffff !important;
            color: #111 !important;
            box-shadow: 0 0 40px rgba(0,0,0,0.05) !important;
        }
    </style>
</head>
<body>

    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->
    <!--          NAVBAR HORIZONTALE CENTRÃ‰E            -->
    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

    <nav id="navbar">
        <div class="nav-item active" data-target="page-chrono">Chrono</div>
        <div class="nav-item" data-target="page-focus">Focus</div>
        <div class="nav-item" data-target="page-pomodoro">Pomodoro</div>
        <div class="nav-item" data-target="page-stats">Stats</div>
        <div class="nav-item" data-target="page-options">Options</div>
    </nav>


    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->
    <!--           CONTAINER PREMIUM CENTRÃ‰             -->
    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

    <div id="content">

        <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ PAGE CHRONO â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

        <section id="page-chrono" class="page active">
            <h1>ChronomÃ¨tre Professionnel</h1>

            <div style="text-align:center;">
                <div id="chronoDisplay">00:00:00.00</div>
            </div>

            <div class="time-controls" style="text-align:center;">
                <input id="h" type="number" min="0" placeholder="Heures">
                <input id="m" type="number" min="0" max="59" placeholder="Minutes">
                <input id="s" type="number" min="0" max="59" placeholder="Secondes">
                <input id="totalSec" type="number" min="0" placeholder="Sec totales">
            </div>

            <div style="text-align:center;">
                <button id="btnStart">DÃ©marrer</button>
                <button id="btnStop">ArrÃªter</button>
                <button id="btnReset">Reset</button>
                <button id="btnAdd">Ajouter</button>
                <button id="btnRemove">Enlever</button>
            </div>
        </section>


        <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ PAGE FOCUS â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

        <section id="page-focus" class="page">
            <h1>Mode Focus</h1>

            <div style="text-align:center;">
                <label>DurÃ©e (minutes) :</label><br><br>
                <input id="focusMinutes" type="number" min="1" value="25"
                       style="padding:10px;width:100px;text-align:center;border-radius:8px;">
                <br><br>
                <button id="btnStartFocus" style="background:#27ae60;">Lancer une session Focus</button>
            </div>
        </section>


        <!-- OVERLAY FOCUS FULLSCREEN -->

        <div id="focusOverlay">
            <div id="focusTimer">25:00</div>
            <button id="exitFocus">Quitter le mode Focus</button>
        </div>


        <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ PAGE POMODORO â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

        <section id="page-pomodoro" class="page">
            <h1>Mode Pomodoro</h1>

            <div style="text-align:center;">

                Travail (min) :
                <input id="pomoWork" type="number" value="25" min="1"
                       style="width:60px;padding:5px;border-radius:8px;text-align:center;">
                <br><br>

                Pause (min) :
                <input id="pomoBreak" type="number" value="5" min="1"
                       style="width:60px;padding:5px;border-radius:8px;text-align:center;">
                <br><br>

                Longue pause (min) :
                <input id="pomoLong" type="number" value="15" min="1"
                       style="width:60px;padding:5px;border-radius:8px;text-align:center;">
                <br><br>

                Cycles :
                <input id="pomoCycles" type="number" value="4" min="1"
                       style="width:60px;padding:5px;border-radius:8px;text-align:center;">
                <br><br>

                <button id="startPomodoro" style="background:#e67e22;">DÃ©marrer Pomodoro</button>

                <h2 style="margin-top:25px;">Temps restant :</h2>
                <div id="pomodoroDisplay">--:--</div>

                <div id="pomodoroStatus"
                     style="opacity:0.8;font-size:18px;margin-top:10px;">
                     Pomodoro en attente
                </div>

                <!-- BOUTON STOP CARRÃ‰ ROUGE (Choix C) -->
                <button id="stopPomodoro"
                        style="
                            background:#c0392b;
                            margin-top:25px;
                            padding:14px 28px;
                            border-radius:6px;
                            font-size:17px;
                            font-weight:600;
                        ">
                    â›” ArrÃªter la session
                </button>

            </div>
        </section>


        <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ PAGE STATS â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

        <section id="page-stats" class="page">
            <h1>Statistiques</h1>

            <div id="statsSummary"
                 style="background:#000;padding:20px;border-radius:var(--radius);
                        margin-bottom:20px;text-align:center;">
                <p><b>Total travaillÃ© aujourd'hui :</b> <span id="todayTotal">0 min</span></p>
                <p><b>Total cette semaine :</b> <span id="weekTotal">0 min</span></p>
                <p><b>Session la plus longue :</b> <span id="bestSession">0 min</span></p>
            </div>

            <h2 style="text-align:center;">Historique des sessions</h2>

            <table id="statsTable">
                <thead>
                    <tr style="background:#222;">
                        <th style="padding:10px;">Date</th>
                        <th style="padding:10px;">DurÃ©e</th>
                    </tr>
                </thead>
                <tbody id="statsBody"></tbody>
            </table>
        </section>


        <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ PAGE OPTIONS â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

        <section id="page-options" class="page">
            <h1>Options</h1>

            <div style="text-align:center;">
                <button id="toggleTheme" style="background:#8e44ad;">Mode clair / sombre</button>
                <br><br>
                <button id="resetStats" style="background:#c0392b;">Reset statistiques</button>

                <p style="opacity:0.7;margin-top:20px;font-size:14px;">
                    Toutes les donnÃ©es sont stockÃ©es localement sur votre appareil.
                </p>
            </div>
        </section>

    </div> <!-- END CONTENT -->



    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->
    <!--                SCRIPT PROFESSIONNEL               -->
    <!-- â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ -->

<script>
/* ===========================================================
    APPSTATE â€” Le Cerveau du site
=========================================================== */
const AppState = {
    theme: "dark",

    chrono: { running: false, start: null, stored: 0 },

    focus: { running: false, remaining: 0, start: null },

    pomodoro: { running: false, phase: "idle", remaining: 0, cycle: 1 },

    stats: []
};

/* ===========================================================
   SAVE + LOAD
=========================================================== */
function saveState() {
    AppState.theme = document.body.classList.contains("light") ? "light" : "dark";
    localStorage.setItem("AppState", JSON.stringify(AppState));
}

function loadState() {
    const data = localStorage.getItem("AppState");
    if (!data) return;
    Object.assign(AppState, JSON.parse(data));
}

// autosave every 500ms
setInterval(saveState, 500);


/* ===========================================================
   THEME
=========================================================== */
function restoreTheme() {
    if (AppState.theme === "light") document.body.classList.add("light");
}

document.getElementById("toggleTheme").onclick = () => {
    document.body.classList.toggle("light");
    saveState();
};


/* ===========================================================
   CHRONO MODULE
=========================================================== */
const Chrono = {
    display: document.getElementById("chronoDisplay"),
    raf: null,

    format(ms) {
        const h = Math.floor(ms / 3600000);
        const m = Math.floor((ms / 60000) % 60);
        const s = Math.floor((ms / 1000) % 60);
        const c = Math.floor((ms % 1000) / 10);
        return `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}.${String(c).padStart(2,"0")}`;
    },

    glow() {
        this.display.classList.add("glow");
        setTimeout(() => this.display.classList.remove("glow"), 200);
    },

    update() {
        if (!AppState.chrono.running) return;
        const now = Date.now();
        const elapsed = AppState.chrono.stored + (now - AppState.chrono.start);
        this.display.textContent = this.format(elapsed);
        this.glow();
        this.raf = requestAnimationFrame(() => this.update());
    },

    start() {
        if (AppState.chrono.running) return;
        AppState.chrono.running = true;
        AppState.chrono.start = Date.now();
        this.update();
    },

    stop() {
        if (!AppState.chrono.running) return;
        AppState.chrono.running = false;
        AppState.chrono.stored += Date.now() - AppState.chrono.start;
        cancelAnimationFrame(this.raf);
    },

    reset() {
        AppState.chrono.running = false;
        AppState.chrono.start = null;
        AppState.chrono.stored = 0;
        cancelAnimationFrame(this.raf);
        this.display.textContent = "00:00:00.00";
    },

    restore() {
        if (AppState.chrono.running) this.update();
        else this.display.textContent = this.format(AppState.chrono.stored);
    }
};

document.getElementById("btnStart").onclick = () => Chrono.start();
document.getElementById("btnStop").onclick = () => Chrono.stop();
document.getElementById("btnReset").onclick = () => Chrono.reset();

document.getElementById("btnAdd").onclick = () => {
    const get = id => parseInt(document.getElementById(id).value) || 0;
    const add = get("h")*3600000 + get("m")*60000 + get("s")*1000 + get("totalSec")*1000;
    AppState.chrono.stored += add;
    Chrono.display.textContent = Chrono.format(AppState.chrono.stored);
    Chrono.glow();
};

document.getElementById("btnRemove").onclick = () => {
    const get = id => parseInt(document.getElementById(id).value) || 0;
    const sub = get("h")*3600000 + get("m")*60000 + get("s")*1000 + get("totalSec")*1000;
    AppState.chrono.stored = Math.max(0, AppState.chrono.stored - sub);
    Chrono.display.textContent = Chrono.format(AppState.chrono.stored);
    Chrono.glow();
};


/* ===========================================================
   FOCUS MODULE
=========================================================== */
const Focus = {
    overlay: document.getElementById("focusOverlay"),
    display: document.getElementById("focusTimer"),
    interval: null,

    start() {
        const mins = parseInt(document.getElementById("focusMinutes").value);
        AppState.focus.running = true;
        AppState.focus.remaining = mins * 60;
        this.show();
        this.tick();
        this.interval = setInterval(() => this.tick(), 1000);
    },

    tick() {
        if (!AppState.focus.running) return;
        AppState.focus.remaining--;
        this.display.textContent =
            `${String(Math.floor(AppState.focus.remaining/60)).padStart(2,"0")}:${String(AppState.focus.remaining%60).padStart(2,"0")}`;
        if (AppState.focus.remaining <= 0) {
            this.stop();
            alert("ðŸ”¥ Session Focus terminÃ©e !");
        }
    },

    stop() {
        clearInterval(this.interval);
        AppState.focus.running = false;
        this.hide();
    },

    show() {
        this.overlay.style.display = "flex";
        document.body.style.overflow = "hidden";
    },

    hide() {
        this.overlay.style.display = "none";
        document.body.style.overflow = "auto";
    },

    restore() {
        if (AppState.focus.running) {
            this.show();
            this.display.textContent =
                `${String(Math.floor(AppState.focus.remaining/60)).padStart(2,"0")}:${String(AppState.focus.remaining%60).padStart(2,"0")}`;
            this.interval = setInterval(() => this.tick(), 1000);
        }
    }
};

document.getElementById("btnStartFocus").onclick = () => Focus.start();
document.getElementById("exitFocus").onclick = () => {
    if (confirm("Quitter la session Focus ?")) Focus.stop();
};


/* ===========================================================
   POMODORO MODULE
=========================================================== */
const Pomodoro = {
    display: document.getElementById("pomodoroDisplay"),
    status: document.getElementById("pomodoroStatus"),
    interval: null,

    start() {
        AppState.pomodoro.running = true;
        AppState.pomodoro.phase = "work";
        AppState.pomodoro.cycle = 1;
        AppState.pomodoro.remaining =
            parseInt(document.getElementById("pomoWork").value)*60;

        this.updateUI();
        this.tick();
        this.interval = setInterval(() => this.tick(), 1000);
    },

    tick() {
        if (!AppState.pomodoro.running) return;

        AppState.pomodoro.remaining--;
        this.updateUI();

        if (AppState.pomodoro.remaining <= 0) this.nextPhase();
    },

    nextPhase() {
        clearInterval(this.interval);
        const cycles = parseInt(document.getElementById("pomoCycles").value);

        if (AppState.pomodoro.phase === "work") {
            if (AppState.pomodoro.cycle % cycles === 0) {
                AppState.pomodoro.phase = "long";
                AppState.pomodoro.remaining = parseInt(document.getElementById("pomoLong").value)*60;
            } else {
                AppState.pomodoro.phase = "break";
                AppState.pomodoro.remaining = parseInt(document.getElementById("pomoBreak").value)*60;
            }
        } else {
            AppState.pomodoro.phase = "work";
            AppState.pomodoro.cycle++;
            AppState.pomodoro.remaining = parseInt(document.getElementById("pomoWork").value)*60;
        }

        this.interval = setInterval(() => this.tick(), 1000);
    },

    stop() {
        if (!confirm("Voulez-vous vraiment arrÃªter la session Pomodoro ?")) return;

        clearInterval(this.interval);
        AppState.pomodoro.running = false;
        AppState.pomodoro.phase = "idle";
        AppState.pomodoro.remaining = 0;
        AppState.pomodoro.cycle = 1;

        this.display.textContent = "--:--";
        this.status.textContent = "Pomodoro en attente";
    },

    updateUI() {
        const m = Math.floor(AppState.pomodoro.remaining/60);
        const s = AppState.pomodoro.remaining % 60;
        this.display.textContent =
            `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;

        if (AppState.pomodoro.phase === "work")
            this.status.textContent = `Travail ðŸ”¥ (cycle ${AppState.pomodoro.cycle})`;
        else if (AppState.pomodoro.phase === "break")
            this.status.textContent = "Pause ðŸ˜Œ";
        else if (AppState.pomodoro.phase === "long")
            this.status.textContent = "Longue pause ðŸ§˜";
    },

    restore() {
        if (!AppState.pomodoro.running) return;
        this.updateUI();
        this.interval = setInterval(() => this.tick(), 1000);
    }
};

document.getElementById("startPomodoro").onclick = () => Pomodoro.start();
document.getElementById("stopPomodoro").onclick = () => Pomodoro.stop();


/* ===========================================================
   STATS MODULE
=========================================================== */
const Stats = {
    updateUI() {
        const body = document.getElementById("statsBody");
        body.innerHTML = "";

        AppState.stats.forEach(s => {
            const tr = document.createElement("tr");
            tr.innerHTML =
                `<td style="padding:10px;">${new Date(s.date).toLocaleString()}</td>
                 <td style="padding:10px;">${s.minutes} min</td>`;
            body.appendChild(tr);
        });

        const today = new Date().toDateString();
        const todayTotal = AppState.stats
            .filter(s => new Date(s.date).toDateString() === today)
            .reduce((a,b)=>a+b.minutes,0);

        document.getElementById("todayTotal").textContent = todayTotal + " min";

        const weekTotal = AppState.stats
            .filter(s => new Date(s.date) >= new Date(Date.now()-7*24*60*60*1000))
            .reduce((a,b)=>a+b.minutes,0);

        document.getElementById("weekTotal").textContent = weekTotal + " min";

        const best = AppState.stats.reduce((max,s)=>Math.max(max,s.minutes),0);
        document.getElementById("bestSession").textContent = best + " min";
    }
};

document.getElementById("resetStats").onclick = () => {
    if (confirm("Supprimer toutes les statistiques ?")) {
        AppState.stats = [];
        saveState();
        Stats.updateUI();
    }
};


/* ===========================================================
   NAVIGATION
=========================================================== */
document.querySelectorAll(".nav-item").forEach(item => {
    item.onclick = () => {
        document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active"));
        item.classList.add("active");

        const t = item.getAttribute("data-target");
        document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
        document.getElementById(t).classList.add("active");
    };
});


/* ===========================================================
   RESTAURATION GLOBALE
=========================================================== */
loadState();
restoreTheme();
Chrono.restore();
Focus.restore();
Pomodoro.restore();
Stats.updateUI();
</script>

</body>
</html>
</html>
